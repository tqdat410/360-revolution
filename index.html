<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no"
    />
    <title>C√°ch M·∫°ng C√¥ng Nghi·ªáp - Tr·∫£i Nghi·ªám 360¬∞</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <style>
      /* Loading Screen */
      #loadingScreen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        color: white;
        font-family: Arial, sans-serif;
      }

      .loading-spinner {
        width: 60px;
        height: 60px;
        border: 4px solid rgba(255, 255, 255, 0.3);
        border-top: 4px solid white;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin-bottom: 20px;
      }

      .loading-text {
        font-size: 18px;
        font-weight: 600;
        margin-bottom: 10px;
      }

      .loading-progress {
        width: 250px;
        height: 4px;
        background: rgba(255, 255, 255, 0.3);
        border-radius: 2px;
        overflow: hidden;
        margin-top: 10px;
      }

      .loading-bar {
        width: 0%;
        height: 100%;
        background: white;
        border-radius: 2px;
        transition: width 0.3s ease;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      #infoPanel {
        position: fixed;
        top: 20px;
        right: 20px;
        width: 300px;
        max-height: 400px;
        background: rgba(0, 0, 0, 0.9);
        color: white;
        padding: 20px;
        border-radius: 10px;
        font-family: Arial, sans-serif;
        display: none;
        z-index: 1000;
        overflow-y: auto;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      }
      #infoPanel h3 {
        margin-top: 0;
        color: #4caf50;
        font-size: 18px;
      }
      #infoPanel p {
        font-size: 14px;
        line-height: 1.5;
      }
      #closeBtn {
        position: absolute;
        top: 10px;
        right: 15px;
        background: none;
        border: none;
        color: white;
        font-size: 24px;
        cursor: pointer;
        padding: 5px;
      }
      #instructions {
        position: fixed;
        bottom: 20px;
        left: 20px;
        background: rgba(0, 0, 0, 0.8);
        color: white;
        padding: 10px 15px;
        border-radius: 20px;
        font-family: Arial, sans-serif;
        font-size: 14px;
        z-index: 1000;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      }

      /* Responsive cho mobile */
      @media screen and (max-width: 768px) {
        #infoPanel {
          top: 60px; /* TƒÉng t·ª´ 10px l√™n 60px ƒë·ªÉ tr√°nh che n√∫t */
          right: 10px;
          left: 10px;
          width: auto;
          max-height: 50vh;
          padding: 15px;
        }
        #infoPanel h3 {
          font-size: 16px;
          margin-bottom: 10px;
        }
        #infoPanel p {
          font-size: 13px;
          line-height: 1.4;
        }
        #closeBtn {
          font-size: 20px;
          top: 8px;
          right: 12px;
        }
        #instructions {
          bottom: 15px;
          left: 15px;
          right: 15px;
          text-align: center;
          padding: 8px 12px;
          font-size: 12px;
        }
      }

      @media screen and (max-width: 480px) {
        #infoPanel {
          top: 55px; /* TƒÉng t·ª´ 5px l√™n 55px ƒë·ªÉ tr√°nh che n√∫t */
          right: 5px;
          left: 5px;
          max-height: 45vh;
          padding: 12px;
        }
        #infoPanel h3 {
          font-size: 15px;
        }
        #infoPanel p {
          font-size: 12px;
        }
        #instructions {
          bottom: 10px;
          left: 10px;
          right: 10px;
          padding: 10px 10px;
          font-size: 11px;
        }
      }

      /* Responsive cho m√†n h√¨nh ƒëi·ªán tho·∫°i n·∫±m ngang */
      @media screen and (max-height: 500px) and (orientation: landscape) {
        #infoPanel {
          top: 5px;
          right: 5px;
          left: 5px;
          width: auto;
          max-height: 70vh;
          padding: 8px 12px;
          font-size: 11px;
        }
        #infoPanel h3 {
          font-size: 13px;
          margin-top: 0;
          margin-bottom: 6px;
        }
        #infoPanel p {
          font-size: 10px;
          line-height: 1.3;
          margin-bottom: 0;
        }
        #closeBtn {
          font-size: 16px;
          top: 4px;
          right: 8px;
          padding: 2px;
        }
        #instructions {
          bottom: 8px;
          left: 8px;
          right: 8px;
          padding: 6px 8px;
          font-size: 10px;
        }
      }

      /* Zoom Controls */
      #zoomControls {
        position: fixed;
        bottom: 20px;
        right: 20px;
        display: flex;
        flex-direction: column;
        gap: 10px;
        z-index: 1000;
      }

      #zoomControls button {
        width: 50px;
        height: 50px;
        border: none;
        border-radius: 50%;
        background: rgba(0, 0, 0, 0.8);
        color: white;
        font-size: 18px;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      }

      #zoomControls button:hover {
        background: rgba(0, 0, 0, 0.9);
        transform: scale(1.1);
      }

      #zoomControls button:active {
        transform: scale(0.95);
      }

      @media screen and (max-width: 768px) {
        #zoomControls {
          bottom: 70px;
          right: 15px;
        }
        #zoomControls button {
          width: 45px;
          height: 45px;
          font-size: 16px;
        }
      }

      /* Page Switch Button */
      #pageSwitch {
        position: fixed;
        top: 20px;
        left: 20px;
        z-index: 1000;
      }

      #pageSwitch button {
        background: rgb(179, 172, 156);
        color: white;
        border: none;
        padding: 12px 20px;
        border-radius: 25px;
        font-family: Arial, sans-serif;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        backdrop-filter: blur(10px);
      }

      #pageSwitch button:hover {
        background: rgb(189, 184, 172);
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
      }

      #pageSwitch button:active {
        transform: translateY(0);
      }

      @media screen and (max-width: 768px) {
        #pageSwitch {
          top: 15px;
          left: 15px;
        }
        #pageSwitch button {
          padding: 10px 16px;
          font-size: 12px;
        }
      }

      @media screen and (max-width: 480px) {
        #pageSwitch {
          top: 10px;
          left: 10px;
        }
        #pageSwitch button {
          padding: 8px 12px;
          font-size: 11px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Loading Screen -->
    <div id="loadingScreen">
      <div class="loading-spinner"></div>
      <div class="loading-text">ƒêang t·∫£i tr·∫£i nghi·ªám 360¬∞...</div>
      <div class="loading-progress">
        <div class="loading-bar" id="loadingBar"></div>
      </div>
      <div style="font-size: 14px; opacity: 0.8; margin-top: 10px">
        Vui l√≤ng ƒë·ª£i trong gi√¢y l√°t
      </div>
    </div>

    <!-- Panel th√¥ng tin -->
    <div id="infoPanel">
      <button id="closeBtn" onclick="closeInfo()">&times;</button>
      <div id="infoContent"></div>
    </div>

    <!-- H∆∞·ªõng d·∫´n -->
    <div id="instructions">
      ü§ñ C√°ch M·∫°ng C√¥ng Nghi·ªáp | ·∫§n v√†o c√°c ch·∫•m tr√≤n ƒë·ªÉ xem th√¥ng tin üí°
    </div>

    <!-- N√∫t chuy·ªÉn ƒë·ªïi trang -->
    <!-- <div id="pageSwitch">
      <button onclick="switchToSecondPage()" title="Chuy·ªÉn sang trang 2">
        üñºÔ∏è Chuy·ªÉn C·∫£nh
      </button>
    </div> -->

    <!-- Zoom Controls cho mobile (ƒë√£ ·∫©n) -->
    <div id="zoomControls" style="display: none">
      <button id="zoomIn">üîç+</button>
      <button id="zoomOut">üîç-</button>
      <button id="zoomReset">‚Üª</button>
    </div>

    <a-scene>
      <!-- ·∫¢nh 360¬∞ ƒë·∫∑t l√†m skybox v·ªõi t·ªëi ∆∞u h√≥a -->
      <a-sky
        id="skybox"
        src="https://res.cloudinary.com/do6szo7zy/image/upload/f_webp,q_90/v1759080957/final_8_q3xwgt.png"
        rotation="0 -90 0"
      ></a-sky>

      <!-- Giai ƒëo·∫°n 1: C√°ch m·∫°ng C√¥ng nghi·ªáp 1.0 (0¬∞) -->
      <a-sphere
        id="hotspot1-1"
        position="0 3.5 -15"
        radius="0.4"
        color="#4ECDC4"
        opacity="0.8"
        animation="property: rotation; to: 0 360 0; loop: true; dur: 3000"
        class="hotspot clickable"
        data-info='{"title": "CMCN 1.0", "content": "‚ÄúC·ªëi xay tay g·∫Øn v·ªõi x√£ h·ªôi l√£nh ch√∫a; c·ªëi xay h∆°i n∆∞·ªõc g·∫Øn v·ªõi x√£ h·ªôi nh√† t∆∞ b·∫£n c√¥ng nghi·ªáp.‚Äù<br><br>(C. M√°c, S·ª± kh·ªën c√πng c·ªßa tri·∫øt h·ªçc)."}'
      ></a-sphere>

      <a-sphere
        id="hotspot1-2"
        position="0 -0.4 -15"
        radius="0.4"
        color="#4ECDC4"
        opacity="0.8"
        animation="property: rotation; to: 0 360 0; loop: true; dur: 3000"
        class="hotspot clickable"
        data-info='{"title": "CMCN 1.0", "content": "LLSX m·ªõi n√†y b·ªã k√¨m h√£m b·ªüi QHSX phong ki·∫øn c≈©. M√¢u thu·∫´n n√†y bi·ªÉu hi·ªán v·ªÅ m·∫∑t x√£ h·ªôi th√†nh cu·ªôc ƒë·∫•u tranh giai c·∫•p gi·ªØa t∆∞ s·∫£n (ƒë·∫°i di·ªán cho LLSX m·ªõi) v√† phong ki·∫øn (b·∫£o v·ªá QHSX c≈©).<br><br>K·∫øt qu·∫£ l√† c√°c cu·ªôc c√°ch m·∫°ng t∆∞ s·∫£n n·ªï ra, x√°c l·∫≠p QHSX t∆∞ b·∫£n ch·ªß nghƒ©a, m·ªü ƒë∆∞·ªùng cho LLSX ph√°t tri·ªÉn."}'
      ></a-sphere>

      <a-sphere
        id="hotspot1-2"
        position="0 -5 -15"
        radius="0.4"
        color="#4ECDC4"
        opacity="0.8"
        animation="property: rotation; to: 0 360 0; loop: true; dur: 3000"
        class="hotspot clickable"
        data-info='{"title": "CMCN 1.0", "content": "S·ª± ra ƒë·ªùi c·ªßa ƒë·ªông c∆° h∆°i n∆∞·ªõc v√† n·ªÅn s·∫£n xu·∫•t c∆° kh√≠ h√≥a (LLSX m·ªõi) ƒë√£ t·∫°o ra giai c·∫•p c√¥ng nh√¢n v√† giai c·∫•p t∆∞ s·∫£n c√¥ng nghi·ªáp. NƒÉng su·∫•t lao ƒë·ªông tƒÉng v·ªçt, ƒë√≤i h·ªèi th·ªã tr∆∞·ªùng r·ªông l·ªõn v√† t·ª± do l∆∞u th√¥ng."}'
      ></a-sphere>

      <!-- Giai ƒëo·∫°n 2: C√°ch m·∫°ng C√¥ng nghi·ªáp 2.0 (30¬∞) -->
      <a-sphere
        id="hotspot2-1"
        position="27 -2 -15"
        radius="0.8"
        color="#4ECDC4"
        opacity="0.8"
        animation="property: rotation; to: 0 360 0; loop: true; dur: 3000"
        class="hotspot clickable"
        data-info='{"title": "CMCN 2.0", "content": "Ch·ªß nghƒ©a t∆∞ b·∫£n trong giai ƒëo·∫°n n√†y ph√°t tri·ªÉn th√†nh ch·ªß nghƒ©a ƒë·∫ø qu·ªëc, ƒë·∫∑c tr∆∞ng b·ªüi s·ª± t·∫≠p trung t∆∞ b·∫£n v√† s·∫£n xu·∫•t v√†o c√°c t·∫≠p ƒëo√†n ƒë·ªôc quy·ªÅn, ng√¢n h√†ng l·ªõn v√† t∆∞ b·∫£n t√†i ch√≠nh. C√°c c∆∞·ªùng qu·ªëc c√¥ng nghi·ªáp (Anh, Ph√°p, ƒê·ª©c, M·ªπ, Nh·∫≠t B·∫£n‚Ä¶) c·∫°nh tranh kh·ªëc li·ªát ƒë·ªÉ gi√†nh th·ªã tr∆∞·ªùng ti√™u th·ª•, ngu·ªìn nguy√™n li·ªáu v√† thu·ªôc ƒë·ªãa."}'
      ></a-sphere>

      <a-sphere
        id="hotspot2-1"
        position="130 -13 -15"
        radius="3"
        color="#4ECDC4"
        opacity="0.8"
        animation="property: rotation; to: 0 360 0; loop: true; dur: 3000"
        class="hotspot clickable"
        data-info='{"title": "CMCN 2.0", "content": "Cu·ªôc ƒë·∫•u tranh gi·ªØa giai c·∫•p v√¥ s·∫£n (ƒë·∫°i di·ªán cho LLSX x√£ h·ªôi h√≥a) v√† giai c·∫•p t∆∞ s·∫£n ƒë·∫ø qu·ªëc tr·ªü th√†nh ƒë·ªông l·ª±c tr·ª±c ti·∫øp c·ªßa l·ªãch s·ª≠.<br><br>C√°ch m·∫°ng Th√°ng M∆∞·ªùi Nga nƒÉm 1917 ch√≠nh l√† cu·ªôc CMXH gi·∫£i quy·∫øt m√¢u thu·∫´n ƒë√≥, thi·∫øt l·∫≠p QHSX m·ªõi d·ª±a tr√™n s·ªü h·ªØu c√¥ng c·ªông, ph√π h·ª£p v·ªõi tr√¨nh ƒë·ªô x√£ h·ªôi h√≥a c·ªßa LLSX."}'
      ></a-sphere>

      <a-sphere
        id="hotspot2-2"
        position="46.5 -20 -15"
        radius="1.2"
        color="#4ECDC4"
        opacity="0.8"
        animation="property: rotation; to: 0 360 0; loop: true; dur: 3000"
        class="hotspot clickable"
        data-info='{"title": "CMCN 2.0", "content": "CMCN l·∫ßn th·ª© hai v·ªõi ƒëi·ªán v√† s·∫£n xu·∫•t d√¢y chuy·ªÅn ƒë√£ ƒë∆∞a LLSX l√™n m·ªôt tr√¨nh ƒë·ªô m·ªõi: tr√¨nh ƒë·ªô x√£ h·ªôi h√≥a cao ƒë·ªô. H√†ng tri·ªáu c√¥ng nh√¢n l√†m vi·ªác trong c√°c nh√† m√°y kh·ªïng l·ªì, li√™n k·∫øt ch·∫∑t ch·∫Ω v·ªõi nhau."}'
      ></a-sphere>

      <!-- Giai ƒëo·∫°n 3: C√°ch m·∫°ng C√¥ng nghi·ªáp 2.0 (60¬∞) -->
      <a-sphere
        id="hotspot3-1"
        position="11.6 -0.5 16"
        radius="0.5"
        color="#4ECDC4"
        opacity="0.8"
        animation="property: rotation; to: 0 360 0; loop: true; dur: 3000"
        class="hotspot clickable"
        data-info='{"title": "CMCN 3.0", "content": "To√†n c·∫ßu h√≥a - S·ª± k·∫øt n·ªëi to√†n c·∫ßu nh·ªù c√¥ng ngh·ªá th√¥ng tin v√† truy·ªÅn th√¥ng, gi√∫p th·∫ø gi·ªõi tr·ªü n√™n ph·∫≥ng h∆°n, h√†ng h√≥a ‚Äì tri th·ª©c ‚Äì con ng∆∞·ªùi c√≥ th·ªÉ l∆∞u th√¥ng nhanh ch√≥ng."}'
      ></a-sphere>

      <a-sphere
        id="hotspot3-2"
        position="11.6 -7 16"
        radius="0.5"
        color="#4ECDC4"
        opacity="0.8"
        animation="property: rotation; to: 0 360 0; loop: true; dur: 3000"
        class="hotspot clickable"
        data-info='{"title": "CMCN 3.0", "content": "T·ª± ƒë·ªông h√≥a: D√¢y chuy·ªÅn s·∫£n xu·∫•t t·ª± ƒë·ªông v·ªõi robot c√¥ng nghi·ªáp, ƒë·∫∑c tr∆∞ng ti√™u bi·ªÉu c·ªßa CMCN 3.0, n∆°i m√°y m√≥c thay th·∫ø con ng∆∞·ªùi trong nhi·ªÅu c√¥ng ƒëo·∫°n s·∫£n xu·∫•t."}'
      ></a-sphere>

      <!-- Giai ƒëo·∫°n 4: C√°ch m·∫°ng C√¥ng nghi·ªáp 3.0 (90¬∞) -->
      <a-sphere
        id="hotspot4-1"
        position="-6.5 4.7 15"
        radius="0.5"
        color="#4ECDC4"
        opacity="0.8"
        animation="property: rotation; to: 0 360 0; loop: true; dur: 3000"
        class="hotspot clickable"
        data-info='{"title": "CMCN 4.0", "content": "K·ª∑ nguy√™n AI: Bi·ªÉu t∆∞·ª£ng c·ªßa tr√≠ tu·ªá nh√¢n t·∫°o v√† robot th√¥ng minh ‚Äì trung t√¢m c·ªßa t·ª± ƒë·ªông h√≥a n√¢ng cao. ƒê√¢y l√† th·ªùi k·ª≥ m√† m√°y m√≥c kh√¥ng ch·ªâ l√†m theo l·ªánh, m√† c√≤n c√≥ kh·∫£ nƒÉng h·ªçc h·ªèi, ph√¢n t√≠ch d·ªØ li·ªáu v√† ƒë∆∞a ra quy·∫øt ƒë·ªãnh, thay th·∫ø con ng∆∞·ªùi trong nhi·ªÅu lƒ©nh v·ª±c t·ª´ s·∫£n xu·∫•t, y t·∫ø, t√†i ch√≠nh ƒë·∫øn ƒë·ªùi s·ªëng h√†ng ng√†y."}'
      ></a-sphere>
      <a-sphere
        id="hotspot4-2"
        position="-16.5 5.7 15"
        radius="0.6"
        color="#4ECDC4"
        opacity="0.8"
        animation="property: rotation; to: 0 360 0; loop: true; dur: 3000"
        class="hotspot clickable"
        data-info='{"title": "CMCN 4.0", "content": "Chuy·ªÉn ƒë·ªïi s·ªë: Th·ªÉ hi·ªán qu√° tr√¨nh s·ªë h√≥a to√†n di·ªán, bao tr√πm t·ª´ d·ªØ li·ªáu, d·ªãch v·ª• ƒë·∫øn m·ªçi ho·∫°t ƒë·ªông x√£ h·ªôi. ƒê√¢y l√† s·ª± k·∫øt n·ªëi th√¥ng minh th√¥ng qua IoT, ƒëi·ªán to√°n ƒë√°m m√¢y, Big Data v√† c√¥ng ngh·ªá 5G, m·ªü ra k·ª∑ nguy√™n n∆°i c√°c h·ªá th·ªëng, doanh nghi·ªáp v√† con ng∆∞·ªùi li√™n th√¥ng ch·∫∑t ch·∫Ω trong m·ªôt kh√¥ng gian s·ªë h√≥a to√†n c·∫ßu."}'
      ></a-sphere>

      <!-- Giai ƒëo·∫°n 6: K·ª∑ nguy√™n AI (150¬∞) -->
      <a-sphere
        id="hotspot6-1"
        position="-37 13 -11.5"
        radius="1.2"
        color="#4ECDC4"
        opacity="0.8"
        animation="property: rotation; to: 0 360 0; loop: true; dur: 3000"
        class="hotspot clickable"
        data-info='{"title": "M√¢u Thu·∫´n m·ªõi ƒëang n·∫£y sinh", "content": "M√¢u thu·∫´n v·ªÅ lao ƒë·ªông: T·ª± ƒë·ªông h√≥a v√† AI c√≥ nguy c∆° thay th·∫ø h√†ng lo·∫°t lao ƒë·ªông, t·∫°o ra s·ª± ph√¢n h√≥a s√¢u s·∫Øc gi·ªØa ng∆∞·ªùi s·ªü h·ªØu c√¥ng ngh·ªá v√† ng∆∞·ªùi lao ƒë·ªông.<br><br>M√¢u thu·∫´n v·ªÅ s·ªü h·ªØu: Ai s·ªü h·ªØu d·ªØ li·ªáu - \"ngu·ªìn d·∫ßu m·ªè m·ªõi\" c·ªßa n·ªÅn kinh t·∫ø? C√°c t·∫≠p ƒëo√†n c√¥ng ngh·ªá kh·ªïng l·ªì ƒëang n·∫Øm gi·ªØ v√† thu l·ª£i t·ª´ d·ªØ li·ªáu c·ªßa to√†n x√£ h·ªôi.<br><br>M√¢u thu·∫´n v·ªÅ ph√¢n ph·ªëi: S·ª± gi√†u c√≥ ƒë∆∞·ª£c t·∫°o ra b·ªüi c√¥ng ngh·ªá ng√†y c√†ng t·∫≠p trung v√†o m·ªôt nh√≥m r·∫•t nh·ªè, l√†m gia tƒÉng b·∫•t b√¨nh ƒë·∫≥ng tr√™n ph·∫°m vi to√†n c·∫ßu."}'
      ></a-sphere>

      <!-- Camera v·ªõi cursor ƒë·ªÉ click v√† zoom -->
      <a-entity
        camera
        look-controls="enabled: true; minVerticalLook: -60; maxVerticalLook: 60; touchEnabled: true; magicWindowTrackingEnabled: true"
        wasd-controls="enabled: false"
        rotation="0 0 0"
        position="0 1.6 0"
        zoom-control
      >
        <a-entity
          cursor="fuse: true; fuseTimeout: 1500"
          position="0 0 -1"
          geometry="primitive: ring; radiusInner: 0.008; radiusOuter: 0.015"
          material="color: white; shader: flat"
          raycaster="objects: .clickable; far: 50"
        >
        </a-entity>
      </a-entity>
    </a-scene>

    <script>
      // Image Preloader
      function preloadImages() {
        return new Promise((resolve, reject) => {
          const imageUrl =
            "https://res.cloudinary.com/do6szo7zy/image/upload/v1759080957/final_8_q3xwgt.png";
          const img = new Image();
          const loadingBar = document.getElementById("loadingBar");
          let progress = 0;

          // Simulate loading progress
          const progressInterval = setInterval(() => {
            progress += Math.random() * 15;
            if (progress > 90) progress = 90;
            loadingBar.style.width = progress + "%";
          }, 100);

          img.onload = function () {
            clearInterval(progressInterval);
            loadingBar.style.width = "100%";
            setTimeout(() => {
              document.getElementById("loadingScreen").style.opacity = "0";
              setTimeout(() => {
                document.getElementById("loadingScreen").style.display = "none";
                resolve();
              }, 500);
            }, 300);
          };

          img.onerror = function () {
            clearInterval(progressInterval);
            console.error("Failed to load image");
            // Still hide loading screen even if image fails
            document.getElementById("loadingScreen").style.display = "none";
            resolve();
          };

          // Start loading
          img.src = imageUrl;
        });
      }

      // ƒê·ª£i A-Frame load xong
      document.addEventListener("DOMContentLoaded", function () {
        // Preload images first
        preloadImages().then(() => {
          setTimeout(function () {
            setupInteractions();
            setupMobileCamera();
          }, 500);
        });
      });

      function setupMobileCamera() {
        const camera = document.querySelector("[camera]");

        if (camera) {
          // Force reset camera rotation on mobile
          if (window.innerWidth <= 768) {
            // Disable device orientation initially to set fixed starting position
            camera.setAttribute("look-controls", {
              enabled: true,
              touchEnabled: true,
              mouseEnabled: true,
              pointerLockEnabled: false,
              reverseMouseDrag: false,
              reverseTouchDrag: false,
              minVerticalLook: -60,
              maxVerticalLook: 60,
              magicWindowTrackingEnabled: false, // T·∫Øt c·∫£m bi·∫øn ban ƒë·∫ßu
            });

            // Set fixed initial rotation to center
            camera.setAttribute("rotation", "0 0 0");

            // After a delay, enable device orientation tracking
            setTimeout(() => {
              camera.setAttribute("look-controls", {
                enabled: true,
                touchEnabled: true,
                mouseEnabled: true,
                pointerLockEnabled: false,
                reverseMouseDrag: false,
                reverseTouchDrag: false,
                minVerticalLook: -60,
                maxVerticalLook: 60,
                magicWindowTrackingEnabled: true, // B·∫≠t l·∫°i c·∫£m bi·∫øn sau khi ƒë√£ set v·ªã tr√≠
              });
            }, 1500);

            // Force camera position multiple times to ensure it sticks
            setTimeout(() => {
              camera.setAttribute("rotation", "0 0 0");
              if (camera.object3D) {
                camera.object3D.rotation.set(0, 0, 0);
              }
            }, 500);

            setTimeout(() => {
              camera.setAttribute("rotation", "0 0 0");
            }, 1000);
          }
        }
      }

      function setupInteractions() {
        // X·ª≠ l√Ω click v√†o hotspot
        document.querySelectorAll(".hotspot").forEach((hotspot) => {
          hotspot.addEventListener("click", function () {
            const info = JSON.parse(this.getAttribute("data-info"));
            showInfo(info.title, info.content);
          });

          // X·ª≠ l√Ω fuse (mobile - nh√¨n l√¢u v√†o ƒëi·ªÉm)
          hotspot.addEventListener("fusing", function () {
            this.setAttribute("scale", "1.3 1.3 1.3");
          });

          hotspot.addEventListener("fused", function () {
            const info = JSON.parse(this.getAttribute("data-info"));
            showInfo(info.title, info.content);
            this.setAttribute("scale", "1 1 1");
          });

          // Hi·ªáu ·ª©ng hover
          hotspot.addEventListener("mouseenter", function () {
            this.setAttribute("scale", "1.2 1.2 1.2");
          });

          hotspot.addEventListener("mouseleave", function () {
            this.setAttribute("scale", "1 1 1");
          });
        });

        // Th√™m t∆∞∆°ng t√°c click tr·ª±c ti·∫øp kh√¥ng c·∫ßn cursor
        const scene = document.querySelector("a-scene");

        // Click tr·ª±c ti·∫øp cho desktop
        scene.addEventListener("mousedown", function (event) {
          const mouseX = (event.clientX / window.innerWidth) * 2 - 1;
          const mouseY = -(event.clientY / window.innerHeight) * 2 + 1;

          const camera = document.querySelector("[camera]");
          if (camera && camera.components && camera.components.camera) {
            const raycaster = new THREE.Raycaster();
            const mouse = new THREE.Vector2(mouseX, mouseY);

            raycaster.setFromCamera(mouse, camera.components.camera.camera);

            const hotspots = [];
            document.querySelectorAll(".hotspot").forEach((hotspot) => {
              if (hotspot.object3D) {
                hotspots.push(hotspot.object3D);
                hotspot.object3D.userData.element = hotspot;
              }
            });

            const intersects = raycaster.intersectObjects(hotspots, true);

            if (intersects.length > 0) {
              let hotspotElement = intersects[0].object.userData.element;

              if (!hotspotElement && intersects[0].object.parent) {
                hotspotElement = intersects[0].object.parent.userData.element;
              }

              if (hotspotElement && hotspotElement.getAttribute("data-info")) {
                const info = JSON.parse(
                  hotspotElement.getAttribute("data-info")
                );
                showInfo(info.title, info.content);
                event.stopPropagation();
              }
            }
          }
        });

        // Touch cho mobile
        scene.addEventListener("touchstart", function (event) {
          if (event.touches.length === 1) {
            const touch = event.touches[0];
            const mouseX = (touch.clientX / window.innerWidth) * 2 - 1;
            const mouseY = -(touch.clientY / window.innerHeight) * 2 + 1;

            const camera = document.querySelector("[camera]");
            if (camera && camera.components && camera.components.camera) {
              const raycaster = new THREE.Raycaster();
              const mouse = new THREE.Vector2(mouseX, mouseY);

              raycaster.setFromCamera(mouse, camera.components.camera.camera);

              const hotspots = [];
              document.querySelectorAll(".hotspot").forEach((hotspot) => {
                if (hotspot.object3D) {
                  hotspots.push(hotspot.object3D);
                  hotspot.object3D.userData.element = hotspot;
                }
              });

              const intersects = raycaster.intersectObjects(hotspots, true);

              if (intersects.length > 0) {
                let hotspotElement = intersects[0].object.userData.element;

                if (!hotspotElement && intersects[0].object.parent) {
                  hotspotElement = intersects[0].object.parent.userData.element;
                }

                if (
                  hotspotElement &&
                  hotspotElement.getAttribute("data-info")
                ) {
                  const info = JSON.parse(
                    hotspotElement.getAttribute("data-info")
                  );
                  showInfo(info.title, info.content);
                  event.preventDefault();
                  event.stopPropagation();
                }
              }
            }
          }
        });

        // Setup zoom controls v√† t·ª± ƒë·ªông ·∫©n instructions
        setupZoomControls();

        if (window.innerWidth <= 768) {
          setTimeout(() => {
            const instructions = document.getElementById("instructions");
            if (instructions) {
              instructions.style.opacity = "0.7";
              instructions.style.transform = "scale(0.9)";
              instructions.style.transition = "all 0.3s ease";

              // ·∫®n ho√†n to√†n sau 10 gi√¢y
              setTimeout(() => {
                instructions.style.display = "none";
              }, 10000);
            }
          }, 5000);
        }

        // Listen for scene load to ensure camera is set correctly
        scene.addEventListener("loaded", () => {
          const camera = document.querySelector("[camera]");
          if (camera && window.innerWidth <= 768) {
            // Force initial rotation to center for mobile
            setTimeout(() => {
              camera.setAttribute("rotation", "0 0 0");
              if (camera.components["look-controls"]) {
                camera.components["look-controls"].pitchObject.rotation.x = 0;
                camera.components["look-controls"].yawObject.rotation.y = 0;
              }
            }, 100);
          }
        });

        console.log("Interactions setup complete!");
      }

      function showInfo(title, content) {
        const panel = document.getElementById("infoPanel");
        const infoContent = document.getElementById("infoContent");

        infoContent.innerHTML = `
          <h3>${title}</h3>
          <p>${content}</p>
        `;

        panel.style.display = "block";

        // Smooth animation
        panel.style.opacity = "0";
        panel.style.transform = "translateY(-10px)";
        setTimeout(() => {
          panel.style.opacity = "1";
          panel.style.transform = "translateY(0)";
          panel.style.transition = "opacity 0.3s ease, transform 0.3s ease";
        }, 10);

        // T·ª± ƒë·ªông ·∫©n - th·ªùi gian kh√°c nhau cho desktop v√† mobile
        const hideTime = window.innerWidth <= 768 ? 12000 : 15000;
        setTimeout(() => {
          panel.style.opacity = "0";
          panel.style.transform = "translateY(-10px)";
          setTimeout(() => {
            panel.style.display = "none";
          }, 300);
        }, hideTime);
      }

      function closeInfo() {
        const panel = document.getElementById("infoPanel");
        panel.style.opacity = "0";
        panel.style.transform = "translateY(-10px)";
        setTimeout(() => {
          panel.style.display = "none";
        }, 300);
      }

      // Zoom functionality - ch·ªâ zoom in t·ª´ v·ªã tr√≠ m·∫∑c ƒë·ªãnh
      let currentFOV = 75; // Default FOV (v·ªã tr√≠ m·∫∑c ƒë·ªãnh)
      const minFOV = 45; // Max zoom in
      const defaultFOV = 75; // V·ªã tr√≠ m·∫∑c ƒë·ªãnh

      function setupZoomControls() {
        const camera = document.querySelector("[camera]");

        // Mouse wheel zoom for desktop (ch·ªâ zoom in)
        document.addEventListener(
          "wheel",
          function (event) {
            event.preventDefault();

            if (event.deltaY < 0) {
              zoomIn(); // Cu·ªôn l√™n = zoom in
            } else {
              zoomOut(); // Cu·ªôn xu·ªëng = tr·ªü v·ªÅ v·ªã tr√≠ m·∫∑c ƒë·ªãnh
            }
          },
          { passive: false }
        );

        // Mobile zoom controls (ƒë√£ t·∫Øt hi·ªÉn th·ªã)
        // if (window.innerWidth <= 768) {
        //   const zoomControls = document.getElementById("zoomControls");
        //   const zoomInBtn = document.getElementById("zoomIn");
        //   const zoomOutBtn = document.getElementById("zoomOut");
        //   const zoomResetBtn = document.getElementById("zoomReset");

        //   if (zoomControls) {
        //     zoomControls.style.display = "flex";

        //     zoomInBtn.addEventListener("click", zoomIn);
        //     zoomOutBtn.addEventListener("click", zoomOut);
        //     zoomResetBtn.addEventListener("click", resetZoom);
        //   }
        // }

        // Touch pinch zoom for mobile - ch·ªâ zoom in
        let initialDistance = 0;
        let initialFOV = currentFOV;

        document.addEventListener("touchstart", function (event) {
          if (event.touches.length === 2) {
            initialDistance = getDistance(event.touches[0], event.touches[1]);
            initialFOV = currentFOV;
          }
        });

        document.addEventListener(
          "touchmove",
          function (event) {
            if (event.touches.length === 2) {
              event.preventDefault();
              const currentDistance = getDistance(
                event.touches[0],
                event.touches[1]
              );
              const scale = currentDistance / initialDistance;

              // Cho ph√©p zoom in v√† zoom out m∆∞·ª£t m√†
              const newFOV = initialFOV / scale;
              setFOV(newFOV);
            }
          },
          { passive: false }
        );
      }

      function zoomIn() {
        const newFOV = Math.max(minFOV, currentFOV - 10);
        setFOV(newFOV);
      }

      function zoomOut() {
        // Zoom out m∆∞·ª£t m√† thay v√¨ nh·∫£y v·ªÅ m·∫∑c ƒë·ªãnh
        const newFOV = Math.min(defaultFOV, currentFOV + 10);
        setFOV(newFOV);
      }

      function resetZoom() {
        setFOV(defaultFOV); // Reset v·ªÅ v·ªã tr√≠ m·∫∑c ƒë·ªãnh
      }

      function setFOV(fov) {
        currentFOV = Math.max(minFOV, Math.min(defaultFOV, fov));
        const camera = document.querySelector("[camera]");

        if (camera && camera.components && camera.components.camera) {
          camera.components.camera.camera.fov = currentFOV;
          camera.components.camera.camera.updateProjectionMatrix();
        }
      }

      function getDistance(touch1, touch2) {
        const dx = touch1.clientX - touch2.clientX;
        const dy = touch1.clientY - touch2.clientY;
        return Math.sqrt(dx * dx + dy * dy);
      }

      // Register custom zoom component
      AFRAME.registerComponent("zoom-control", {
        init: function () {
          this.el.setAttribute("camera", "fov", currentFOV);
        },
      });

      // Function to switch to second page
      function switchToSecondPage() {
        window.location.href = "index_2.html";
      }
    </script>
  </body>
</html>
